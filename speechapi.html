<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Web Speech API Demo</title>
    <style>
      #message-panel {
        width: 100%;
        height: 15em;
        display: block;
        overflow-y: scroll;
        border: 1px solid black;
        line-height: 1.3em;
      }
    </style>

   </head>
   <body>
    <textarea readonly="readonly" id="message-panel"></textarea>
   	<script type="text/javascript">
      var transcript = document.getElementById("message-panel");
   		window.SpeechRecognition = window.SpeechRecognition ||
   									window.webkitSpeechRecognition ||
   									null;

   		if(window.SpeechRecognition == null) {
   			alert("No API found");
   		} else {
   			var recognizer = new window.SpeechRecognition();
   			recognizer.lang = "en-US";
   			recognizer.continuous = true;
        recognizer.interimResults = true;

   			recognizer.onresult = function(event) {
   				console.log(" Results found: ", event);
          transcript.textContent = '';

   				for(var i = event.resultIndex; i < event.results.length; i++){

   					if(event.results[i].isFinal){
   						transcript.textContent = "Final> Transcript: " + event.results[i][0].transcript + " (Confidence: " + event.results[i][0].confidence + " )";

   					} else {
   						transcript.textContent += " Inprogress>: " + event.results[i][0].transcript + " (Confidence: " + event.results[i][0].confidence + " )";
   					}
   				}
   			};

   			recognizer.onerror = function(event) {
   				console.error("Error occured: ", event);
   			};

   			try {
   				recognizer.start();
   			}catch(ex){
   				console.error("Starting process failed: ", ex.message);
   			}
   		}
   	</script>
   </body>
</html>